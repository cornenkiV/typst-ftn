= Теоријске основе

== Основе блокчејн технологије

Блокчејн (енг. _blockchain_) је дистрибуирана, децентрализована и криптографски обезбеђена дигитална књига трансакција. За разлику од традиционалних централизованих база података, где један ентитет има потпуну контролу над подацима, копија блокчејна је чувана и синхронизована међу свим учесницима у _peer-to-peer_ (_P2P_) мрежи. Оваква архитектура елиминише потребу за посредником или централним ауторитетом, чиме се омогућава сигурна и транспарентна размена директно између учесника.

Основу технологије чине две кључне компоненте: блок и ланац.

*Блок* представља контејнер за податке. Сваки блок у ланцу садржи скуп трансакција које су се догодиле у одређеном временском периоду, као и неколико кључних метаподатака који га повезују са остатком ланца:

 - *Хеш претходног блока (енг. _previous_hash_):* Криптографски отисак претходног блока у ланцу, који служи као веза и осигурава континуитет.

 - *Временска ознака (енг. _timestamp_):* Запис о времену када је блок креиран.

 - *Нонс (енг. _nonce_):* Случајан број који рудари покушавају да погоде у _Proof-of-Work_ систему како би задовољили унапред дефинисану тежину.

 - *Подаци (енг. _data_):* Садржи листу трансакција које су укључене у блок.

 - *Хеш блока (енг. _hash_):* Јединствени криптографски отисак који се израчунава на основу свих осталих података у блоку. Овај хеш служи као јединствени идентификатор блока.

Ланац настаје повезивањем блокова у хронолошки низ. Сваки нови блок у себи садржи хеш претходног блока, чиме се ствара криптографска веза. Први блок у ланцу, познат као генесис (енг. _genesis_) блок, једини је који не садржи референцу на претходни блок. Ова ланчана структура је темељ сигурности и непроменљивости система.

Криптографско хеширање је математички процес који узима улазне податке произвољне величине и од њих креира излаз фиксне дужине, хеш. Овај процес је детерминистички (исти улаз увек производи исти излаз) и једносмеран, што значи да је рачунарски практично немогуће из излазног хеша реконструисати оригиналне улазне податке. У већини блокчејн система, укључујући и имплементацију у овом раду, користи се алгоритам SHA-256. Хеширање има двоструку улогу: користи се за креирање јединственог идентификатора сваког блока и за повезивање блокова у ланац путем `previous_hash` поља.

Из овакве структуре произилазе кључне карактеристике блокчејна:

 - *Децентрализација:*  Подаци нису складиштени на једном централном серверу, већ су дистрибуирани широм мреже. Ово систем чини отпорним на појединачне тачке отказа и цензуру јер не постоји један ауторитет који може самостално да мења или брише податке.

 - *Непроменљивост (енг. _immutability_):*  Једном када су подаци уписани у блок и тај блок додат у ланац, практично их је немогуће изменити. Ако би нападач покушао да измени податке у неком од претходних блокова, хеш тог блока би се променио. Пошто наредни блок садржи стари хеш, веза би била прекинута. Да би сакрио своју измену, нападач би морао поново да израчуна хешеве свих наредних блокова у ланцу, што је рачунарски изузетно захтеван процес и практично неизводљив на великим мрежама. Ово својство гарантује интегритет података и гради поверење међу учесницима.


== Консензус алгоритми

Како би децентрализована мрежа, састављена од великог броја независних и потенцијално злонамерних учесника, могла да функционише као јединствен и кохерентан систем, неопходно је да постоји механизам који им омогућава да се усагласе око заједничког стања. Овај механизам се назива консензус алгоритам.Његова основна улога је да осигура да сви чворови у мрежи имају идентичну копију блокчејна и да се сви слажу око тога који су блокови валидни и којим редоследом се додају у ланац.

У дистрибуираним системима, постизање консензуса је нетривијалан проблем, познат као Проблем византијских генерала (енг. _Byzantine Generals Problem_) @byzantine. Овај проблем описује сценарио у којем група генерала мора да се договори о заједничком плану напада, али комуницирају само путем гласника, а међу њима може бити издајника који шаљу лажне поруке. Циљ је пронаћи протокол који омогућава лојалним генералима да донесу исту одлуку, чак и у присуству издајника. У контексту блокчејна, чворови у мрежи су генерали, а злонамерни чворови који покушавају да компромитују систем су издајници.

Консензус алгоритам мора да обезбеди својство познато као толеранција на византијске грешке (енг. _Byzantine Fault Tolerance_, BFT), што је способност система да настави са исправним радом чак и ако се неки од његових чворова понашају непредвидиво или злонамерно.

Функција консензус алгоритма у блокчејн мрежи је вишеструка:
1.  *Избор креатора блока:* Дефинише правила по којима се одређује који учесник у мрежи има право да креира и предложи следећи блок.
2.  *Валидација и сигурност:* Осигурава да се у ланац додају само валидни блокови који поштују правила протокола, чиме се мрежа штити од напада попут двоструког трошења (енг. _double-spending_).
3.  *Одржавање јединственог ланца:* Пружа механизам за решавање конфликата у случају да два или више учесника истовремено предложе валидан блок, осигуравајући да се мрежа на крају усагласи око једне верзије.

Постоји велики број различитих приступа за постизање консензуса, од којих сваки има своје компромисе у погледу сигурности, брзине, скалабилности и потрошње ресурса. У наредним потпоглављима биће детаљно описана два најзначајнија и најраспрострањенија алгоритма који су предмет анализе у овом раду, _Proof-of-Work_ и _Proof-of-Stake_.


=== _Proof-of-Work_ (PoW)

_Proof-of-Work_ (PoW), или доказ о раду, је први и најпознатији консензус алгоритам имплементиран у Биткоину и многим другим блокчејн системима. Основни принцип овог механизма је да учесници у мрежи морају да обаве значајан рачунарски рад како би добили право да додају нови блок у ланац. Овај процес је намерно дизајниран да буде тежак и скуп, али да резултат тог рада буде лако проверљив од стране осталих учесника у мрежи.

Централни концепт PoW алгоритма је рударење (енг. _mining_). То је процес у којем се учесници (рудари) такмиче у решавању сложене криптографске загонетке. Циљ је пронаћи хеш за нови блок који задовољава одређени услов. Пошто је излаз хеш функције практично непредвидив, једини начин да се пронађе одговарајући хеш јесте методом грубе силе (енг. _brute-force_). Он подразумева поновно испробавање различитих улазних вредности.

Да би се ово омогућило, сваки блок садржи посебно поље названо нонс (енг. _nonce_, скраћено од _"number used only once"_). Рудари непрекидно мењају вредност нонса, израчунавају хеш целог блока за сваку нову вредност, и проверавају да ли добијени хеш задовољава задати услов. Први рудар који пронађе валидан нонс побеђује, добија право да свој блок дода у ланац и бива награђен одређеном количином криптовалуте.

Услов који хеш мора да задовољи дефинисан је параметром тежина (енг. _difficulty_). У пракси, тежина представља захтев да хеш блока мора бити мањи од одређене циљне вредности, што је еквивалентно томе да мора почињати одређеним бројем нула. На пример, ако је тежина подешена тако да захтева пет водећих нула, рудари ће тражити нонс који производи хеш облика "`00000abcdef...`". Што је већи захтевани број нула, то је мања вероватноћа проналаска одговарајућег хеша у једном покушају, па је и процес рударења тежи и дуготрајнији.

Тежина није статична вредност. Мрежа је аутоматски периодично подешава како би се време креирања новог блока одржало на приближно константном нивоу (на пример око 10 минута за Биткоин), без обзира на промене у укупној рачунарској снази мреже. Ако се више рудара придружи мрежи и блокови се проналазе пребрзо, тежина се повећава. Ако рудари напусте мрежу, тежина се смањује.

Сигурност PoW система произилази директно из рачунарске тежине рударења. Да би нападач изменио трансакцију у неком од претходних блокова, морао би поново да изрудари тај блок и све наредне блокове који су на њега повезани, и то брже него што остатак мреже ствара нове блокове на исправном ланцу. Овакав напад, познат као напад 51%, захтевао би да нападач контролише више од половине укупне рачунарске снаге мреже, што је на великим мрежама изузетно скупо и тешко изводљиво.

Иако изузетно сигуран, највећи недостатак PoW алгоритма је његова енергетска неефикасност. Конкурентска природа рударења, где се милиони специјализованих уређаја широм света такмиче у насумичном погађању нонса, доводи до потрошње огромне количине електричне енергије, што представља значајан еколошки и економски изазов @bitcoin_energy.


=== _Proof-of-Stake_ (PoS)

Као директан одговор на изазове, пре свега на велику потрошњу енергије _Proof-of-Work_ алгоритма, развијен је _Proof-of-Stake_ (PoS). Овај консензус механизам мења основни принцип заштите мреже, уместо да се сигурност заснива на рачунарској снази, она се темељи на економском учешћу. У PoS систему, учесници познати као валидатори (енг. _validators_) не троше електричну енергију на решавање криптографских задатака, већ морају да закључају одређену количину криптовалуте као свој улог (енг. _stake_), који служи као залог за њихово поштено понашање.

Процес креирања новог блока у PoS систему се назива ковање (енг. _forging_) или потврђивање (енг. _attesting_). Избор валидатора који ће креирати следећи блок није такмичарски процес као у PoW, већ се врши путем детерминистичког или псеудо-случајног алгоритма. Најчешћи приступ је да вероватноћа да неки валидатор буде изабран буде директно пропорционална величини његовог улога, што је већи улог, већа је и шанса да баш тај валидатор добије право да предложи следећи блок и за то добије награду у виду трансакционих провизија.

Сигурност мреже је загарантована економским подстицајима. Пошто су валидатори финансијски уложили у систем, у њиховом је најбољем интересу да се понашају поштено и одржавају интегритет мреже, јер би сваки напад умањио вредност њиховог улога. Уколико се валидатор понаша злонамерно (покуша да потврди неважећу трансакцију или предложи више блокова за исту позицију у ланцу), систем га може казнити одузимањем дела или чак целог уложеног износа. Овај казнени механизам је познат као слешинг (енг. _slashing_) и представља снажан демотивишући фактор за било какав облик напада. "Напад 51%" у PoS контексту би захтевао да нападач поседује већину укупне уложене криптовалуте, што би било изузетно скупо, а успех напада би вероватно довео до пада вредности те исте валуте, чинећи га економски бесмисленим.

_Proof-of-Stake_ нуди неколико кључних предности у односу на _Proof-of-Work_:

 - *Енергетска ефикасност:* Најзначајнија предност PoS система је драстично мања потрошња енергије. Пошто нема потребе за интензивним рачунарским операцијама, хардверски захтеви за учешће у мрежи су минимални. Преласком мреже Етереум на PoS, процењено је да је њена укупна потрошња енергије смањена за преко 99.9% @ethereum_merge_energy.

 - *Нижи праг за учешће:* У PoW системима, за успешно рударење је потребан скуп и специјализован хардвер. У PoS системима, праг за улазак је поседовање одређене количине криптовалуте, што може учинити учешће у обезбеђивању мреже доступнијим ширем кругу корисника.

 - *Већа брзина и пропусност:* Пошто не постоји потреба за решавањем тешког криптографског задатка, процес избора валидатора и креирања блока може бити знатно бржи. Ово омогућава креирање блокова у интервалима од неколико секунди, што резултира већом пропусношћу трансакција.


== Теорија Паралелног Рачунарства

Развој рачунарског хардвера у последње две деценије обележен је променом парадигме. Уместо повећања брзине једног процесорског језгра, фокус је прешао на повећање броја језгара унутар једног процесора. Ова промена је условила да се за постизање бољих перформанси софтвер мора дизајнирати тако да може истовремено да извршава више задатака. Тај приступ је познат као паралелно рачунарство (енг. _parallel computing_), и представља темељ рачунарства високих перформанси (енг. _High-Performance Computing_, HPC).

Процес рударења у _Proof-of-Work_ систему, који се своди на независно испробавање огромног броја нонс вредности, представља пример проблема који је инхерентно паралелизован (енг. _embarrassingly parallel_). То значи да се укупан посао може лако поделити на мање независне делове који се могу извршавати истовремено на различитим језгрима процесора без потребе за међусобном комуникацијом током извршавања. Ова карактеристика чини PoW идеалним кандидатом за примену техника паралелног рачунарства.

Да би се измерила и анализирала ефикасност паралелне имплементације, неопходно је увести теоријске концепте и метрике које омогућавају објективну процену перформанси. У наредним потпоглављима биће дефинисане основне метрике попут убрзања и ефикасности, представљени модели јаког и слабог скалирања, и објашњени теоријски оквири које постављају Амдалов и Густафсонов закон.

=== Метрике за мерење перформанси

Да би се објективно процениле предности паралелне имплементације у односу на секвенцијалну, користе се стандардне метрике из области рачунарства високих перформанси. Две најважније метрике су убрзање и ефикасност.

 -   *Убрзање (енг. Speedup)* мери колико је пута паралелна верзија програма бржа од одговарајуће секвенцијалне верзије. Рачуна се као однос времена извршавања на једном процесорском језгру ($T_1$) и времена извршавања на $p$ језгара ($T_p$):

    $ S_p = T_1 / T_p $

    У идеалном случају, убрзање је линеарно ($S_p = p$), што би значило да програм ради $p$ пута брже на $p$ језгара. У пракси, ово је ретко оствариво због додатног оптерећења (енг. _overhead_) које настаје услед креирања и синхронизације нити, комуникације и расподеле посла.

 -   *Ефикасност (енг. Efficiency)* представља нормализовану вредност убрзања и показује колико добро су процесорски ресурси искоришћени. Рачуна се као однос постигнутог убрзања ($S_p$) и броја искоришћених процесорских језгара ($p$):

    $ E_p = S_p / p $

    Ефикасност се обично изражава у процентима. Идеална вредност је 1 (или 100%), што означава савршено линеарно убрзање. Вредности мање од 1 указују на то да је део рачунарских ресурса потрошен на додатно оптерећење уместо на користан рад.

=== Модели скалирања

Скалабилност је кључна карактеристика паралелног система која описује како се његове перформансе понашају са повећањем броја процесорских ресурса. Постоје два основна модела за анализу скалабилности:

 -   *Јако скалирање (енг. _Strong Scaling_)* се користи за процену способности система да исти проблем реши брже коришћењем већег броја процесора. Укупна величина проблема остаје фиксна док се број процесорских језгара ($p$) повећава. Циљ је да се време извршавања ($T_p$) смањи што је више могуће. Јако скалирање је посебно важно за апликације где је време одзива критично.

 -   *Слабо скалирање (енг. _Weak Scaling_)* процењује способност система да реши већи проблем у истом временском року коришћењем већег броја процесора. Величина проблема расте пропорционално са повећањем броја језгара тако да свако језгро обрађује приближно исту количину посла. Циљ је да време извршавања ($T_p$) остане константно. Слабо скалирање је релевантно за научне симулације и обраду великих скупова података, где додатни ресурси омогућавају детаљнију или обимнију анализу.

=== Теоријски модели убрзања: Амдалов и Густафсонов закон

Ефикасност паралелних програма није неограничена. Чак и у идеалним условима, постојање дела кода који се мора извршавати секвенцијално представља ограничење. Ова ограничења су дефинисана кроз два теоријска модела.

 -   *Амдалов закон* дефинише теоријски максимум убрзања који се може постићи за проблем фиксне величине, што одговара моделу јаког скалирања @hpcwiki. Закон каже да је убрзање ограничено делом програма који се не може паралелизовати (серијским делом). Формула гласи:

    $ S(p) = 1 / (s + (1-s)/p) $

    где је $s$ пропорција укупног времена извршавања која припада серијском делу, $1-s$ пропорција која припада паралелном делу, а $p$ је број процесорских језгара. Из ове формуле следи да како $p$ тежи бесконачности, максимално убрзање тежи вредности $1/s$.

 -   *Густафсонов закон* нуди другачију перспективу која је у складу са моделом слабог скалирања @hpcwiki. Овај закон претпоставља да се са већим бројем процесора решавају и већи проблеми. Он не мери колико се брже решава исти проблем, већ колико се већи проблем може решити у истом временском року. Убрзање које се постиже дефинисано је формулом:

    $ S(p) = p - s(p-1) $

     где је $s$ пропорција укупног времена извршавања која припада серијском делу, а $p$ је број процесорских језгара. Докле год се величина проблема може повећавати, убрзање се може приближити линеарном. Овај модел боље одражава стварну употребу великих паралелних система, где је циљ најчешће повећање обима или прецизности обраде, а не само смањење времена извршавања.